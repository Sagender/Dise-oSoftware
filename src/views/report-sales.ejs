<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<title>Home</title>

	<link rel="stylesheet" tyoe="text/css" href="css/normalize.css">
	<link rel="stylesheet" tyoe="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" tyoe="text/css" href="css/bootstrap-material-design.min.css">
	<link rel="stylesheet" tyoe="text/css" href="css/all.css">
	<link rel="stylesheet" tyoe="text/css" href="css/sweetalert2.min.css">
	<script src="js/sweetalert2.min.js"></script>
	<link rel="stylesheet" tyoe="text/css" href="css/jquery.mCustomScrollbar.css">
	<link rel="stylesheet" tyoe="text/css" href="css/style.css">

</head>

<body>

	<!-- Main container -->
	<main class="full-box main-container">
		<!-- Nav lateral -->
		<%- include('../views/partials/sectionLateral') %>

		<!-- Page content -->

		<section class="full-box page-content scroll">
			<!-- seccion info -->
			<%- include('../views/partials/navbar-info') %>
			<div class="full-box page-header">
				<h3 class="text-left text-uppercase">
					<i class="fas fa-hand-holding-usd fa-fw"></i> &nbsp; Reportes de ventas
				</h3>
				<p class="text-justify">
					En el módulo REPORTES podrá ver, generar e imprimir reportes de ventas e inventario en formato PDF.
				</p>
			</div>

			<div class="container-fluid">
				<div id="today-sales">
					<h4 class="text-center">Estadísticas de ventas de hoy (26-11-2021)</h4>
					<div class="table-responsive">
						<table class="table table-bordered table-dashboard">
							<thead>
								<tr class="text-center">
									<th scope="col">Ventas realizadas</th>
									<th scope="col">Total en ventas</th>
									<th scope="col">Costo de ventas</th>
									<th scope="col">Ganancias</th>
								</tr>
							</thead>
							<tbody>
								<tr class="text-center">
									<td>1</td>
									<td>$1,015.00 USD</td>
									<td>$1,010.00 USD</td>
									<td>$5.00 USD</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<p class="text-center">
					<a href="#" class="btn btn-outline-info print-barcode" data-id="#today-sales"><i class="fas fa-print"></i>
						&nbsp; Imprimir</a>
				</p>
				<hr>
				<div class="container-fluid">
					<h4 class="text-center">Generar reporte personalizado</h4>
					<div class="form-neon">
						<div class="container-fluid">
							<div class="row justify-content-md-center">
								<div class="col-12 col-md-4">
									<div class="form-group bmd-form-group">
										<label for="fecha_inicio" class="bmd-label-static">Fecha inicial (día/mes/año)</label>
										<input type="date" class="form-control" name="fecha_inicio" id="fecha_inicio" maxlength="30">
									</div>
								</div>
								<div class="col-12 col-md-4">
									<div class="form-group bmd-form-group">
										<label for="fecha_final" class="bmd-label-static">Fecha final (día/mes/año)</label>
										<input type="date" class="form-control" name="fecha_final" id="fecha_final" maxlength="30">
									</div>
								</div>
								<div class="col-12">
									<p class="text-center" style="margin-top: 40px;">
										<button type="button" class="btn btn-raised btn-info" onclick="generar_reporte()"><i
												class="far fa-file-pdf"></i> &nbsp; GENERAR REPORTE</button>
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<script>
				function generar_reporte() {
					Swal.fire({
						title: '¿Quieres generar el reporte?',
						text: "La generación del reporte PDF puede tardar unos minutos para completarse",
						type: 'question',
						showCancelButton: true,
						confirmButtonColor: '#3085d6',
						cancelButtonColor: '#d33',
						confirmButtonText: 'Si, generar',
						cancelButtonText: 'No, cancelar'
					}).then((result) => {
						if (result.value) {
							let fecha_inicio = document.querySelector('#fecha_inicio').value;
							let fecha_final = document.querySelector('#fecha_final').value;

							fecha_inicio.trim();
							fecha_final.trim();

							if (fecha_inicio != "" && fecha_final != "") {
								url = "" + fecha_inicio + "&&ff=" + fecha_final;
								window.open(url, 'Imprimir reporte de ventas', 'width=820,height=720,top=0,left=100,menubar=NO,toolbar=YES');
							} else {
								Swal.fire({
									title: 'Ocurrió un error inesperado',
									text: 'Debe de ingresar la fecha de inicio y final para generar el reporte.',
									type: 'error',
									confirmButtonText: 'Aceptar'
								});
							}
						}
					});
				}
			</script>
		</section>

	</main>


	<script src="js/jquery-3.4.1.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="js/bootstrap-material-design.min.js"></script>
	<script>$(document).ready(function () { $('body').bootstrapMaterialDesign(); });</script>
	<script src="js/main.js"></script>

</body>

</html>